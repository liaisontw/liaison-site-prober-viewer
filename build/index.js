(()=>{"use strict";var e,t={196(){const e=window.wp.blocks,t=(window.wp.i18n,window.wp.blockEditor,window.wp.element),i=window.wp.components,n=window.ReactJSXRuntime;(0,e.registerBlockType)("site-prober/log-viewer",{edit:function({attributes:e,setAttributes:o}){const{selectedPlugin:r}=e,[s,l]=(0,t.useState)([]),[a,c]=(0,t.useState)([]),[u,p]=(0,t.useState)(!1),[d,w]=(0,t.useState)("");return(0,t.useEffect)(()=>{!async function(){try{const e=await fetch("/wp-json/site-prober/v1/plugins"),t=await e.json();l(t||[])}catch(e){w("Failed to load plugins.")}}()},[]),(0,t.useEffect)(()=>{r&&async function(){p(!0),w("");try{const e=await fetch(`/wp-json/site-prober/v1/logs?plugin=${r}`),t=await e.json();c(t||[])}catch(e){w("Failed to load logs.")}p(!1)}()},[r]),(0,n.jsxs)("div",{className:"splv-editor",children:[(0,n.jsx)(i.SelectControl,{label:"Select Plugin",value:r,options:[{label:"Select a plugin",value:""},...s.map(e=>({label:e,value:e}))],onChange:e=>o({selectedPlugin:e})}),u&&(0,n.jsx)(i.Spinner,{}),d&&(0,n.jsx)(i.Notice,{status:"error",children:d}),(0,n.jsx)("ul",{children:a.map((e,t)=>(0,n.jsx)("li",{children:e.message},t))})]})},save:function(){return(0,n.jsx)("div",{children:(0,n.jsx)("em",{children:"Logs will load on front-end via JSâ€¦"})})}})}},i={};function n(e){var o=i[e];if(void 0!==o)return o.exports;var r=i[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,i,o,r)=>{if(!i){var s=1/0;for(u=0;u<e.length;u++){for(var[i,o,r]=e[u],l=!0,a=0;a<i.length;a++)(!1&r||s>=r)&&Object.keys(n.O).every(e=>n.O[e](i[a]))?i.splice(a--,1):(l=!1,r<s&&(s=r));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,o,r]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,i)=>{var o,r,[s,l,a]=i,c=0;if(s.some(t=>0!==e[t])){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(a)var u=a(n)}for(t&&t(i);c<s.length;c++)r=s[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},i=globalThis.webpackChunkliaison_site_prober_viewer=globalThis.webpackChunkliaison_site_prober_viewer||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var o=n.O(void 0,[350],()=>n(196));o=n.O(o)})();